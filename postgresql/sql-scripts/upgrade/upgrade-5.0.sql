SET client_min_messages TO NOTICE;

SET tmp.current_major TO :current_major;
SET tmp.current_minor TO :current_minor;
SET tmp.current_revision TO :current_revision;

DO $$
DECLARE
  schema_name text;
  schema_srid integer;
  current_major integer := current_setting('tmp.current_major')::integer;
  current_minor integer := current_setting('tmp.current_minor')::integer;
  current_revision integer := current_setting('tmp.current_revision')::integer;
BEGIN
  FOR schema_name IN
    SELECT nspname FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace
    WHERE c.relname = 'database_srs' AND c.relkind = 'r'
  LOOP
    EXECUTE format('set search_path to %I, citydb_pkg, public', schema_name);
    RAISE NOTICE 'Upgrading schema "%" ...', schema_name;

    RAISE NOTICE 'Changing the geometry type of the column "val_implicitgeom_refpoint" in the "property" table to POINTZ ...';
    SELECT srid INTO schema_srid FROM database_srs;
    EXECUTE format(
      'ALTER TABLE property ALTER COLUMN val_implicitgeom_refpoint TYPE geometry(POINTZ, %L)',
      schema_srid
    );

    RAISE NOTICE 'Fixing layout and primary key of the table "appear_to_surface_data" ...';
    ALTER TABLE appear_to_surface_data DROP CONSTRAINT IF EXISTS appear_to_surface_data_pk;
    ALTER TABLE appear_to_surface_data DROP COLUMN IF EXISTS id;
    ALTER TABLE appear_to_surface_data ALTER COLUMN surface_data_id SET NOT NULL;
    ALTER TABLE appear_to_surface_data ADD CONSTRAINT appear_to_surface_data_pk PRIMARY KEY (appearance_id, surface_data_id);
    DROP SEQUENCE IF EXISTS appear_to_surface_data_seq;

    RAISE NOTICE 'Adding an index on the "theme" column of the "appearance" table ...';
    CREATE INDEX IF NOT EXISTS appearance_theme_inx ON appearance (theme);

    RAISE NOTICE 'Updating table "objectclass" ...';
    UPDATE objectclass
    SET SCHEMA = '{"identifier":"core:AbstractCityObject","description":"AbstractCityObject is the abstract superclass of all thematic classes.","table":"feature","properties":[{"name":"externalReference","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"References external objects in other information systems that have a relation to the city object.","type":"core:ExternalReference"},{"name":"generalizesTo","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Relates generalized representations of the same real-world object in different Levels of Detail to the city object. The direction of this relation is from the city object to the corresponding generalized city objects.","type":"core:FeatureProperty","target":"core:AbstractCityObject","relationType":"relates"},{"name":"relativeToTerrain","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Describes the vertical position of the city object relative to the surrounding terrain.","type":"core:String"},{"name":"relativeToWater","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Describes the vertical position of the city object relative to the surrounding water surface.","type":"core:String"},{"name":"relatedTo","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Relates other city objects to the city object. It also describes how the city objects are related to each other.","type":"core:CityObjectRelation"},{"name":"appearance","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Relates appearances to the city object.","type":"core:AppearanceProperty"},{"name":"dynamizer","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Relates Dynamizer objects to the city object. These allow timeseries data to override static attribute values of the city object.","type":"core:FeatureProperty","target":"core:AbstractDynamizer","relationType":"contains"}]}'
    WHERE ID = 7;

    UPDATE objectclass
    SET SCHEMA = '{"identifier":"core:AbstractSpace","description":"AbstractSpace is the abstract superclass for all types of spaces. A space is an entity of volumetric extent in the real world.","table":"feature","properties":[{"name":"spaceType","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Specifies the degree of openness of a space.","type":"core:String"},{"name":"volume","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Specifies qualified volumes related to the space.","type":"core:QualifiedVolume"},{"name":"area","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Specifies qualified areas related to the space.","type":"core:QualifiedArea"},{"name":"boundary","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Relates to surfaces that bound the space.","type":"core:FeatureProperty","target":"core:AbstractSpaceBoundary","relationType":"contains"},{"name":"lod0Point","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Relates to a 3D Point geometry that represents the space in Level of Detail 0.","type":"core:GeometryProperty","target":"core:Point"},{"name":"lod0MultiSurface","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Relates to a 3D MultiSurface geometry that represents the space in Level of Detail 0.","type":"core:GeometryProperty","target":"core:MultiSurface"},{"name":"lod0MultiCurve","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Relates to a 3D MultiCurve geometry that represents the space in Level of Detail 0.","type":"core:GeometryProperty","target":"core:MultiLineString"},{"name":"lod1Solid","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Relates to a 3D Solid geometry that represents the space in Level of Detail 1.","type":"core:GeometryProperty","target":"core:AbstractSolid"},{"name":"lod2Solid","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Relates to a 3D Solid geometry that represents the space in Level of Detail 2.","type":"core:GeometryProperty","target":"core:AbstractSolid"},{"name":"lod2MultiSurface","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Relates to a 3D MultiSurface geometry that represents the space in Level of Detail 2.","type":"core:GeometryProperty","target":"core:MultiSurface"},{"name":"lod2MultiCurve","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Relates to a 3D MultiCurve geometry that represents the space in Level of Detail 2.","type":"core:GeometryProperty","target":"core:MultiLineString"},{"name":"lod3Solid","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Relates to a 3D Solid geometry that represents the space in Level of Detail 3.","type":"core:GeometryProperty","target":"core:AbstractSolid"},{"name":"lod3MultiSurface","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Relates to a 3D MultiSurface geometry that represents the space in Level of Detail 3.","type":"core:GeometryProperty","target":"core:MultiSurface"},{"name":"lod3MultiCurve","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Relates to a 3D MultiCurve geometry that represents the space in Level of Detail 3.","type":"core:GeometryProperty","target":"core:MultiLineString"}]}'
    WHERE ID = 8;

    UPDATE objectclass
    SET SCHEMA = '{"identifier":"core:AbstractPhysicalSpace","description":"AbstractPhysicalSpace is the abstract superclass for all types of physical spaces. Physical space refers to spaces that are fully or partially bounded by physical objects.","table":"feature","properties":[{"name":"lod1TerrainIntersectionCurve","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Relates to a 3D MultiCurve geometry that represents the terrain intersection curve of the physical space in Level of Detail 1.","type":"core:GeometryProperty","target":"core:MultiLineString"},{"name":"lod2TerrainIntersectionCurve","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Relates to a 3D MultiCurve geometry that represents the terrain intersection curve of the physical space in Level of Detail 2.","type":"core:GeometryProperty","target":"core:MultiLineString"},{"name":"lod3TerrainIntersectionCurve","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Relates to a 3D MultiCurve geometry that represents the terrain intersection curve of the physical space in Level of Detail 3.","type":"core:GeometryProperty","target":"core:MultiLineString"},{"name":"pointCloud","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Relates to a 3D PointCloud that represents the physical space.","type":"core:FeatureProperty","target":"core:AbstractPointCloud","relationType":"contains"}]}'
    WHERE ID = 10;

    UPDATE objectclass
    SET SCHEMA = '{"identifier":"core:AbstractThematicSurface","description":"AbstractThematicSurface is the abstract superclass for all types of thematic surfaces.","table":"feature","properties":[{"name":"area","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Specifies qualified areas related to the thematic surface.","type":"core:QualifiedArea"},{"name":"lod0MultiCurve","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Relates to a 3D MultiCurve geometry that represents the thematic surface in Level of Detail 0.","type":"core:GeometryProperty","target":"core:MultiLineString"},{"name":"lod1MultiSurface","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Relates to a 3D MultiSurface geometry that represents the thematic surface in Level of Detail 1.","type":"core:GeometryProperty","target":"core:MultiSurface"},{"name":"lod2MultiSurface","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Relates to a 3D MultiSurface geometry that represents the thematic surface in Level of Detail 2.","type":"core:GeometryProperty","target":"core:MultiSurface"},{"name":"lod3MultiSurface","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Relates to a 3D MultiSurface geometry that represents the thematic surface in Level of Detail 3.","type":"core:GeometryProperty","target":"core:MultiSurface"},{"name":"pointCloud","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Relates to a 3D PointCloud that represents the thematic surface.","type":"core:FeatureProperty","target":"core:AbstractPointCloud","relationType":"contains"},{"name":"lod4MultiSurface","namespace":"http://3dcitydb.org/3dcitydb/deprecated/5.0","description":"Relates to a 3D MultiSurface geometry that represents the thematic surface in Level of Detail 4. Deprecated since CityGML 3.0.","type":"core:GeometryProperty","target":"core:MultiSurface"}]}'
    WHERE ID = 14;

    UPDATE objectclass
    SET SCHEMA = '{"identifier":"core:CityModel","description":"CityModel is the container for all objects belonging to a city model.","table":"feature","properties":[{"name":"cityObjectMember","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Specifies the city objects that are part of the CityModel.","type":"core:FeatureProperty","target":"core:AbstractCityObject","relationType":"contains"},{"name":"versionMember","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Specifies the different versions of the CityModel.","type":"core:FeatureProperty","target":"core:AbstractVersion","relationType":"contains"},{"name":"versionTransitionMember","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Specifies the transitions between the different versions of the CityModel.","type":"core:FeatureProperty","target":"core:AbstractVersionTransition","relationType":"contains"},{"name":"appearanceMember","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Specifies the appearances of the CityModel.","type":"core:AppearanceProperty"},{"name":"featureMember","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Specifies the feature objects that are part of the CityModel. It allows to include features that are not derived from core:AbstractCityObject.","type":"core:FeatureProperty","target":"core:AbstractFeature","relationType":"contains"}]}'
    WHERE ID = 18;

    UPDATE objectclass
    SET SCHEMA = '{"identifier":"core:ImplicitGeometry","description":"ImplicitGeometry is a geometry representation where the shape is stored only once as a prototypical geometry. Examples are a tree or other vegetation object, a traffic light or a traffic sign. This prototypic geometry object can be re-used or referenced many times, wherever the corresponding feature occurs in the 3D city model.","table":"implicit_geometry","properties":[{"name":"objectId","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Specifies the identifier of the implicit geometry that is unique within the database. Using a globally unique identifier is recommended.","value":{"column":"objectid","type":"string"}},{"name":"mimeType","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Specifies the MIME type of the external file that stores the prototypical geometry.","value":{"column":"mime_type","type":"string"}},{"name":"codeSpace","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Specifies the code space of the MIME type, typically a dictionary, thesaurus, classification scheme, authority, or pattern for the MIME type.","value":{"column":"mime_type_codespace","type":"string"},"parent":1},{"name":"libraryObject","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Specifies the URI that points to the prototypical geometry stored in an external file.","value":{"column":"reference_to_library","type":"string"}},{"name":"relativeGeometry","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Relates to a prototypical geometry in a local coordinate system stored in the database.","target":"core:AbstractGeometry","join":{"table":"geometry_data","fromColumn":"relative_geometry_id","toColumn":"id"}},{"name":"appearance","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Relates appearances to the ImplicitGeometry.","target":"app:Appearance","join":{"table":"appearance","fromColumn":"id","toColumn":"implicit_geometry_id"}}]}'
    WHERE ID = 21;

    UPDATE objectclass
    SET SCHEMA = '{"identifier":"dyn:Dynamizer","description":"A Dynamizer is an object that injects timeseries data for an individual attribute of the city object in which it is included. The timeseries data overrides the static value of the referenced city object attribute in order to represent dynamic (time-dependent) variations of its value.","table":"feature","properties":[{"name":"attributeRef","namespace":"http://3dcitydb.org/3dcitydb/dynamizer/5.0","description":"Specifies the attribute of a feature whose value is overridden or replaced by the (dynamic) values specified by the Dynamizer.","type":"dyn:AttributeReference"},{"name":"startTime","namespace":"http://3dcitydb.org/3dcitydb/dynamizer/5.0","description":"Specifies the beginning of the time span for which the Dynamizer provides dynamic values.","type":"core:TimePosition"},{"name":"endTime","namespace":"http://3dcitydb.org/3dcitydb/dynamizer/5.0","description":"Specifies the end of the time span for which the Dynamizer provides dynamic values.","type":"core:TimePosition"},{"name":"dynamicData","namespace":"http://3dcitydb.org/3dcitydb/dynamizer/5.0","description":"Relates to the timeseries data.","type":"core:FeatureProperty","target":"dyn:AbstractTimeseries","relationType":"contains"},{"name":"sensorConnection","namespace":"http://3dcitydb.org/3dcitydb/dynamizer/5.0","description":"Relates to the sensor API that delivers timeseries data.","type":"dyn:SensorConnection"}]}'
    WHERE ID = 100;

    UPDATE objectclass
    SET SCHEMA = '{"identifier":"dem:ReliefFeature","description":"A ReliefFeature is a collection of terrain components representing the earth''s surface, also known as the Digital Terrain Model.","table":"feature","properties":[{"name":"lod","namespace":"http://3dcitydb.org/3dcitydb/relief/5.0","description":"Indicates the Level of Detail of the ReliefFeature.","type":"core:Integer"},{"name":"reliefComponent","namespace":"http://3dcitydb.org/3dcitydb/relief/5.0","description":"Relates to the terrain components that are part of the ReliefFeature.","type":"core:FeatureProperty","target":"dem:AbstractReliefComponent","relationType":"contains"}]}'
    WHERE ID = 500;

    UPDATE objectclass
    SET SCHEMA = '{"identifier":"dem:MassPointRelief","description":"A MassPointRelief represents a terrain component as a collection of 3D points.","table":"feature","properties":[{"name":"reliefPoints","namespace":"http://3dcitydb.org/3dcitydb/relief/5.0","description":"Relates to the 3D MultiPoint geometry of the MassPointRelief.","type":"core:GeometryProperty","target":"core:MultiPoint"},{"name":"pointCloud","namespace":"http://3dcitydb.org/3dcitydb/relief/5.0","description":"Relates to the 3D PointCloud of the MassPointRelief.","type":"core:FeatureProperty","target":"core:AbstractPointCloud","relationType":"contains"}]}'
    WHERE ID = 503;

    UPDATE objectclass
    SET SCHEMA = '{"identifier":"tran:AbstractTransportationSpace","description":"AbstractTransportationSpace is the abstract superclass of transportation objects such as Roads, Tracks, Railways, Waterways or Squares.","table":"feature","properties":[{"name":"trafficDirection","namespace":"http://3dcitydb.org/3dcitydb/transportation/5.0","description":"Indicates the direction of traffic flow relative to the corresponding linear geometry representation.","type":"core:String"},{"name":"occupancy","namespace":"http://3dcitydb.org/3dcitydb/transportation/5.0","description":"Provides information on the residency of persons, vehicles, or other moving features in the transportation space.","type":"core:Occupancy"},{"name":"trafficSpace","namespace":"http://3dcitydb.org/3dcitydb/transportation/5.0","description":"Relates to the traffic spaces that are part of the transportation space.","type":"core:FeatureProperty","target":"tran:TrafficSpace","relationType":"contains"},{"name":"auxiliaryTrafficSpace","namespace":"http://3dcitydb.org/3dcitydb/transportation/5.0","description":"Relates to the auxiliary traffic spaces that are part of the transportation space.","type":"core:FeatureProperty","target":"tran:AuxiliaryTrafficSpace","relationType":"contains"},{"name":"hole","namespace":"http://3dcitydb.org/3dcitydb/transportation/5.0","description":"Relates to the holes that are part of the transportation space.","type":"core:FeatureProperty","target":"tran:Hole","relationType":"contains"},{"name":"marking","namespace":"http://3dcitydb.org/3dcitydb/transportation/5.0","description":"Relates to the markings that are part of the transportation space.","type":"core:FeatureProperty","target":"tran:Marking","relationType":"contains"},{"name":"lod1MultiSurface","namespace":"http://3dcitydb.org/3dcitydb/deprecated/5.0","description":"Relates to a 3D MultiSurface geometry that represents the transportation space in Level of Detail 1. Deprecated since CityGML 3.0.","type":"core:GeometryProperty","target":"core:MultiSurface"},{"name":"lod4MultiSurface","namespace":"http://3dcitydb.org/3dcitydb/deprecated/5.0","description":"Relates to a 3D MultiSurface geometry that represents the transportation space in Level of Detail 4. Deprecated since CityGML 3.0.","type":"core:GeometryProperty","target":"core:MultiSurface"}]}'
    WHERE ID = 600;

    UPDATE objectclass
    SET SCHEMA = '{"identifier":"tran:Railway","description":"A Railway is a transportation space used by wheeled vehicles on rails.","table":"feature","properties":[{"name":"class","namespace":"http://3dcitydb.org/3dcitydb/transportation/5.0","description":"Indicates the specific type of the Railway.","type":"core:Code"},{"name":"function","namespace":"http://3dcitydb.org/3dcitydb/transportation/5.0","description":"Specifies the intended purposes of the Railway.","type":"core:Code"},{"name":"usage","namespace":"http://3dcitydb.org/3dcitydb/transportation/5.0","description":"Specifies the actual uses of the Railway.","type":"core:Code"},{"name":"section","namespace":"http://3dcitydb.org/3dcitydb/transportation/5.0","description":"Relates to the sections that are part of the Railway.","type":"core:FeatureProperty","target":"tran:Section","relationType":"contains"},{"name":"intersection","namespace":"http://3dcitydb.org/3dcitydb/transportation/5.0","description":"Relates to the intersections that are part of the Railway.","type":"core:FeatureProperty","target":"tran:Intersection","relationType":"contains"}]}'
    WHERE ID = 601;

    UPDATE objectclass
    SET SCHEMA = '{"identifier":"tran:Waterway","description":"A Waterway is a transportation space used for the movement of vessels upon or within a water body.","table":"feature","properties":[{"name":"class","namespace":"http://3dcitydb.org/3dcitydb/transportation/5.0","description":"Indicates the specific type of the Waterway.","type":"core:Code"},{"name":"function","namespace":"http://3dcitydb.org/3dcitydb/transportation/5.0","description":"Specifies the intended purposes of the Waterway.","type":"core:Code"},{"name":"usage","namespace":"http://3dcitydb.org/3dcitydb/transportation/5.0","description":"Specifies the actual uses of the Waterway.","type":"core:Code"},{"name":"section","namespace":"http://3dcitydb.org/3dcitydb/transportation/5.0","description":"Relates to the sections that are part of the Waterway.","type":"core:FeatureProperty","target":"tran:Section","relationType":"contains"},{"name":"intersection","namespace":"http://3dcitydb.org/3dcitydb/transportation/5.0","description":"Relates to the intersections that are part of the Waterway.","type":"core:FeatureProperty","target":"tran:Intersection","relationType":"contains"}]}'
    WHERE ID = 603;

    UPDATE objectclass
    SET SCHEMA = '{"identifier":"tran:Road","description":"A Road is a transportation space used by vehicles, bicycles and/or pedestrians.","table":"feature","properties":[{"name":"class","namespace":"http://3dcitydb.org/3dcitydb/transportation/5.0","description":"Indicates the specific type of the Road.","type":"core:Code"},{"name":"function","namespace":"http://3dcitydb.org/3dcitydb/transportation/5.0","description":"Specifies the intended purposes of the Road.","type":"core:Code"},{"name":"usage","namespace":"http://3dcitydb.org/3dcitydb/transportation/5.0","description":"Specifies the actual uses of the Road.","type":"core:Code"},{"name":"section","namespace":"http://3dcitydb.org/3dcitydb/transportation/5.0","description":"Relates to the sections that are part of the Road.","type":"core:FeatureProperty","target":"tran:Section","relationType":"contains"},{"name":"intersection","namespace":"http://3dcitydb.org/3dcitydb/transportation/5.0","description":"Relates to the intersections that are part of the Road.","type":"core:FeatureProperty","target":"tran:Intersection","relationType":"contains"}]}'
    WHERE ID = 607;

    UPDATE objectclass
    SET SCHEMA = '{"identifier":"tran:TrafficSpace","description":"A TrafficSpace is a space in which traffic takes place. Traffic includes the movement of entities such as trains, vehicles, pedestrians, ships, or other transportation types.","table":"feature","properties":[{"name":"class","namespace":"http://3dcitydb.org/3dcitydb/transportation/5.0","description":"Indicates the specific type of the TrafficSpace.","type":"core:Code"},{"name":"function","namespace":"http://3dcitydb.org/3dcitydb/transportation/5.0","description":"Specifies the intended purposes of the TrafficSpace.","type":"core:Code"},{"name":"usage","namespace":"http://3dcitydb.org/3dcitydb/transportation/5.0","description":"Specifies the actual uses of the TrafficSpace.","type":"core:Code"},{"name":"granularity","namespace":"http://3dcitydb.org/3dcitydb/transportation/5.0","description":"Defines whether traffic spaces are represented by individual ways or by individual lanes, depending on the desired level of spatial and semantic decomposition.","type":"core:String"},{"name":"trafficDirection","namespace":"http://3dcitydb.org/3dcitydb/transportation/5.0","description":"Indicates the direction of traffic flow relative to the corresponding linear geometry representation.","type":"core:String"},{"name":"occupancy","namespace":"http://3dcitydb.org/3dcitydb/transportation/5.0","description":"Provides information on the residency of persons, vehicles, or other moving features in the TrafficSpace.","type":"core:Occupancy"},{"name":"predecessor","namespace":"http://3dcitydb.org/3dcitydb/transportation/5.0","description":"Indicates the predecessor(s) of the TrafficSpace.","type":"core:FeatureProperty","target":"tran:TrafficSpace","relationType":"relates"},{"name":"successor","namespace":"http://3dcitydb.org/3dcitydb/transportation/5.0","description":"Indicates the successor(s) of the TrafficSpace.","type":"core:FeatureProperty","target":"tran:TrafficSpace","relationType":"relates"},{"name":"clearanceSpace","namespace":"http://3dcitydb.org/3dcitydb/transportation/5.0","description":"Relates to the clearance spaces that are part of the TrafficSpace.","type":"core:FeatureProperty","target":"tran:ClearanceSpace","relationType":"contains"}]}'
    WHERE ID = 610;

    UPDATE objectclass
    SET SCHEMA = '{"identifier":"con:AbstractConstructiveElement","description":"AbstractConstructiveElement is the abstract superclass for the representation of volumetric elements of a construction. Examples are walls, beams, slabs.","table":"feature","properties":[{"name":"isStructuralElement","namespace":"http://3dcitydb.org/3dcitydb/construction/5.0","description":"Indicates whether the constructive element is essential from a structural point of view. A structural element cannot be omitted without collapsing of the construction. Examples are pylons and anchorages of bridges.","type":"core:Boolean"},{"name":"filling","namespace":"http://3dcitydb.org/3dcitydb/construction/5.0","description":"Relates to the elements that fill the opening of the constructive element.","type":"core:FeatureProperty","target":"con:AbstractFillingElement","relationType":"contains"}]}'
    WHERE ID = 702;

    UPDATE objectclass
    SET SCHEMA = '{"identifier":"con:AbstractConstructionSurface","description":"AbstractConstructionSurface is the abstract superclass for different kinds of surfaces that bound a construction.","table":"feature","properties":[{"name":"fillingSurface","namespace":"http://3dcitydb.org/3dcitydb/construction/5.0","description":"Relates to the surfaces that seal the openings of the construction surface.","type":"core:FeatureProperty","target":"con:AbstractFillingSurface","relationType":"contains"}]}'
    WHERE ID = 708;

    UPDATE objectclass
    SET SCHEMA = '{"identifier":"tun:AbstractTunnel","description":"AbstractTunnel is an abstract superclass representing the common attributes and associations of the classes Tunnel and TunnelPart.","table":"feature","properties":[{"name":"class","namespace":"http://3dcitydb.org/3dcitydb/tunnel/5.0","description":"Indicates the specific type of the Tunnel or TunnelPart.","type":"core:Code"},{"name":"function","namespace":"http://3dcitydb.org/3dcitydb/tunnel/5.0","description":"Specifies the intended purposes of the Tunnel or TunnelPart.","type":"core:Code"},{"name":"usage","namespace":"http://3dcitydb.org/3dcitydb/tunnel/5.0","description":"Specifies the actual uses of the Tunnel or TunnelPart.","type":"core:Code"},{"name":"tunnelConstructiveElement","namespace":"http://3dcitydb.org/3dcitydb/tunnel/5.0","description":"Relates the constructive elements to the Tunnel or TunnelPart.","type":"core:FeatureProperty","target":"tun:TunnelConstructiveElement","relationType":"contains"},{"name":"tunnelInstallation","namespace":"http://3dcitydb.org/3dcitydb/tunnel/5.0","description":"Relates the installation objects to the Tunnel or TunnelPart.","type":"core:FeatureProperty","target":"tun:TunnelInstallation","relationType":"contains"},{"name":"hollowSpace","namespace":"http://3dcitydb.org/3dcitydb/tunnel/5.0","description":"Relates the hollow spaces to the Tunnel or TunnelPart.","type":"core:FeatureProperty","target":"tun:HollowSpace","relationType":"contains"},{"name":"tunnelFurniture","namespace":"http://3dcitydb.org/3dcitydb/tunnel/5.0","description":"Relates the furniture objects to the Tunnel or TunnelPart.","type":"core:FeatureProperty","target":"tun:TunnelFurniture","relationType":"contains"},{"name":"lod1MultiSurface","namespace":"http://3dcitydb.org/3dcitydb/deprecated/5.0","description":"Relates to a 3D MultiSurface geometry that represents the Tunnel or TunnelPart in Level of Detail 1. Deprecated since CityGML 3.0.","type":"core:GeometryProperty","target":"core:MultiSurface"},{"name":"lod4MultiCurve","namespace":"http://3dcitydb.org/3dcitydb/deprecated/5.0","description":"Relates to a 3D MultiCurve geometry that represents the Tunnel or TunnelPart in Level of Detail 4. Deprecated since CityGML 3.0.","type":"core:GeometryProperty","target":"core:MultiLineString"},{"name":"lod4MultiSurface","namespace":"http://3dcitydb.org/3dcitydb/deprecated/5.0","description":"Relates to a 3D MultiSurface geometry that represents the Tunnel or TunnelPart in Level of Detail 4. Deprecated since CityGML 3.0.","type":"core:GeometryProperty","target":"core:MultiSurface"},{"name":"lod4Solid","namespace":"http://3dcitydb.org/3dcitydb/deprecated/5.0","description":"Relates to a 3D Solid geometry that represents the Tunnel or TunnelPart in Level of Detail 4. Deprecated since CityGML 3.0.","type":"core:GeometryProperty","target":"core:AbstractSolid"},{"name":"lod4TerrainIntersectionCurve","namespace":"http://3dcitydb.org/3dcitydb/deprecated/5.0","description":"Relates to a 3D MultiCurve geometry that represents the terrain intersection curve of the Tunnel or TunnelPart in Level of Detail 4. Deprecated since CityGML 3.0.","type":"core:GeometryProperty","target":"core:MultiLineString"}]}'
    WHERE ID = 800;

    UPDATE objectclass
    SET SCHEMA = '{"identifier":"tun:Tunnel","description":"A Tunnel represents a horizontal or sloping enclosed passage way of a certain length, mainly underground or underwater.","table":"feature","properties":[{"name":"tunnelPart","namespace":"http://3dcitydb.org/3dcitydb/tunnel/5.0","description":"Relates the tunnel parts to the Tunnel.","type":"core:FeatureProperty","target":"tun:TunnelPart","relationType":"contains"}]}'
    WHERE ID = 801;

    UPDATE objectclass
    SET SCHEMA = '{"identifier":"tun:HollowSpace","description":"A HollowSpace is a space within a Tunnel or TunnelPart intended for certain functions (e.g. transport or passage ways, service rooms, emergency shelters). A HollowSpace is bounded physically and/or virtually (e.g. by ClosureSurfaces or GenericSurfaces).","table":"feature","properties":[{"name":"class","namespace":"http://3dcitydb.org/3dcitydb/tunnel/5.0","description":"Indicates the specific type of the HollowSpace.","type":"core:Code"},{"name":"function","namespace":"http://3dcitydb.org/3dcitydb/tunnel/5.0","description":"Specifies the intended purposes of the HollowSpace.","type":"core:Code"},{"name":"usage","namespace":"http://3dcitydb.org/3dcitydb/tunnel/5.0","description":"Specifies the actual uses of the HollowSpace.","type":"core:Code"},{"name":"tunnelFurniture","namespace":"http://3dcitydb.org/3dcitydb/tunnel/5.0","description":"Relates the furniture objects to the HollowSpace.","type":"core:FeatureProperty","target":"tun:TunnelFurniture","relationType":"contains"},{"name":"tunnelInstallation","namespace":"http://3dcitydb.org/3dcitydb/tunnel/5.0","description":"Relates the installation objects to the HollowSpace.","type":"core:FeatureProperty","target":"tun:TunnelInstallation","relationType":"contains"},{"name":"lod4Solid","namespace":"http://3dcitydb.org/3dcitydb/deprecated/5.0","description":"Relates to a 3D Solid geometry that represents the HollowSpace in Level of Detail 4. Deprecated since CityGML 3.0.","type":"core:GeometryProperty","target":"core:AbstractSolid"},{"name":"lod4MultiSurface","namespace":"http://3dcitydb.org/3dcitydb/deprecated/5.0","description":"Relates to a 3D MultiSurface geometry that represents the HollowSpace in Level of Detail 4. Deprecated since CityGML 3.0.","type":"core:GeometryProperty","target":"core:MultiSurface"}]}'
    WHERE ID = 804;

    UPDATE objectclass
    SET SCHEMA = '{"identifier":"bldg:AbstractBuilding","description":"AbstractBuilding is an abstract superclass representing the common attributes and associations of the classes Building and BuildingPart.","table":"feature","properties":[{"name":"class","namespace":"http://3dcitydb.org/3dcitydb/building/5.0","description":"Indicates the specific type of the Building or BuildingPart.","type":"core:Code"},{"name":"function","namespace":"http://3dcitydb.org/3dcitydb/building/5.0","description":"Specifies the intended purposes of the Building or BuildingPart.","type":"core:Code"},{"name":"usage","namespace":"http://3dcitydb.org/3dcitydb/building/5.0","description":"Specifies the actual uses of the Building or BuildingPart.","type":"core:Code"},{"name":"roofType","namespace":"http://3dcitydb.org/3dcitydb/building/5.0","description":"Indicates the shape of the roof of the Building or BuildingPart.","type":"core:Code"},{"name":"storeysAboveGround","namespace":"http://3dcitydb.org/3dcitydb/building/5.0","description":"Indicates the number of storeys positioned above ground level.","type":"core:Integer"},{"name":"storeysBelowGround","namespace":"http://3dcitydb.org/3dcitydb/building/5.0","description":"Indicates the number of storeys positioned below ground level.","type":"core:Integer"},{"name":"storeyHeightsAboveGround","namespace":"http://3dcitydb.org/3dcitydb/building/5.0","description":"Lists the heights of each storey above ground. The first value in the list denotes the height of the storey closest to the ground level, the last value denotes the height furthest away.","type":"core:MeasureOrNilReasonList"},{"name":"storeyHeightsBelowGround","namespace":"http://3dcitydb.org/3dcitydb/building/5.0","description":"Lists the height of each storey below ground. The first value in the list denotes the height of the storey closest to the ground level, the last value denotes the height furthest away.","type":"core:MeasureOrNilReasonList"},{"name":"buildingConstructiveElement","namespace":"http://3dcitydb.org/3dcitydb/building/5.0","description":"Relates the constructive elements to the Building or BuildingPart.","type":"core:FeatureProperty","target":"bldg:BuildingConstructiveElement","relationType":"contains"},{"name":"buildingInstallation","namespace":"http://3dcitydb.org/3dcitydb/building/5.0","description":"Relates the installation objects to the Building or BuildingPart.","type":"core:FeatureProperty","target":"bldg:BuildingInstallation","relationType":"contains"},{"name":"buildingRoom","namespace":"http://3dcitydb.org/3dcitydb/building/5.0","description":"Relates the rooms to the Building or BuildingPart.","type":"core:FeatureProperty","target":"bldg:BuildingRoom","relationType":"contains"},{"name":"buildingFurniture","namespace":"http://3dcitydb.org/3dcitydb/building/5.0","description":"Relates the furniture objects to the Building or BuildingPart.","type":"core:FeatureProperty","target":"bldg:BuildingFurniture","relationType":"contains"},{"name":"buildingSubdivision","namespace":"http://3dcitydb.org/3dcitydb/building/5.0","description":"Relates the logical subdivisions to the Building or BuildingPart.","type":"core:FeatureProperty","target":"bldg:AbstractBuildingSubdivision","relationType":"contains"},{"name":"address","namespace":"http://3dcitydb.org/3dcitydb/building/5.0","description":"Relates the addresses to the Building or BuildingPart.","type":"core:AddressProperty"},{"name":"lod0RoofEdge","namespace":"http://3dcitydb.org/3dcitydb/deprecated/5.0","description":"Relates to a 3D MultiSurface geometry that represents the roof edge of the Building or BuildingPart in Level of Detail 0. Deprecated since CityGML 3.0.","type":"core:GeometryProperty","target":"core:MultiSurface"},{"name":"lod1MultiSurface","namespace":"http://3dcitydb.org/3dcitydb/deprecated/5.0","description":"Relates to a 3D MultiSurface geometry that represents the Building or BuildingPart in Level of Detail 1. Deprecated since CityGML 3.0.","type":"core:GeometryProperty","target":"core:MultiSurface"},{"name":"lod4MultiCurve","namespace":"http://3dcitydb.org/3dcitydb/deprecated/5.0","description":"Relates to a 3D MultiCurve geometry that represents the Building or BuildingPart in Level of Detail 4. Deprecated since CityGML 3.0.","type":"core:GeometryProperty","target":"core:MultiLineString"},{"name":"lod4MultiSurface","namespace":"http://3dcitydb.org/3dcitydb/deprecated/5.0","description":"Relates to a 3D MultiSurface geometry that represents the Building or BuildingPart in Level of Detail 4. Deprecated since CityGML 3.0.","type":"core:GeometryProperty","target":"core:MultiSurface"},{"name":"lod4Solid","namespace":"http://3dcitydb.org/3dcitydb/deprecated/5.0","description":"Relates to a 3D Solid geometry that represents the Building or BuildingPart in Level of Detail 4. Deprecated since CityGML 3.0.","type":"core:GeometryProperty","target":"core:AbstractSolid"},{"name":"lod4TerrainIntersectionCurve","namespace":"http://3dcitydb.org/3dcitydb/deprecated/5.0","description":"Relates to a 3D MultiCurve geometry that represents the terrain intersection curve of the Building or BuildingPart in Level of Detail 4. Deprecated since CityGML 3.0.","type":"core:GeometryProperty","target":"core:MultiLineString"}]}'
    WHERE ID = 900;

    UPDATE objectclass
    SET SCHEMA = '{"identifier":"bldg:Building","description":"A Building is a free-standing, self-supporting construction that is roofed, usually walled, and can be entered by humans and is normally designed to stand permanently in one place. It is intended for human occupancy (e.g. a place of work or recreation), habitation and/or shelter of humans, animals or things.","table":"feature","properties":[{"name":"buildingPart","namespace":"http://3dcitydb.org/3dcitydb/building/5.0","description":"Relates the building parts to the Building.","type":"core:FeatureProperty","target":"bldg:BuildingPart","relationType":"contains"}]}'
    WHERE ID = 901;

    UPDATE objectclass
    SET SCHEMA = '{"identifier":"bldg:BuildingRoom","description":"A BuildingRoom is a space within a Building or BuildingPart intended for human occupancy (e.g. a place of work or recreation) and/or containment of animals or things. A BuildingRoom is bounded physically and/or virtually (e.g. by ClosureSurfaces or GenericSurfaces).","table":"feature","properties":[{"name":"class","namespace":"http://3dcitydb.org/3dcitydb/building/5.0","description":"Indicates the specific type of the BuildingRoom.","type":"core:Code"},{"name":"function","namespace":"http://3dcitydb.org/3dcitydb/building/5.0","description":"Specifies the intended purposes of the BuildingRoom.","type":"core:Code"},{"name":"usage","namespace":"http://3dcitydb.org/3dcitydb/building/5.0","description":"Specifies the actual uses of the BuildingRoom.","type":"core:Code"},{"name":"roomHeight","namespace":"http://3dcitydb.org/3dcitydb/building/5.0","description":"Specifies qualified heights of the BuildingRoom.","type":"bldg:RoomHeight"},{"name":"buildingFurniture","namespace":"http://3dcitydb.org/3dcitydb/building/5.0","description":"Relates the furniture objects to the BuildingRoom.","type":"core:FeatureProperty","target":"bldg:BuildingFurniture","relationType":"contains"},{"name":"buildingInstallation","namespace":"http://3dcitydb.org/3dcitydb/building/5.0","description":"Relates the installation objects to the BuildingRoom.","type":"core:FeatureProperty","target":"bldg:BuildingInstallation","relationType":"contains"},{"name":"lod4Solid","namespace":"http://3dcitydb.org/3dcitydb/deprecated/5.0","description":"Relates to a 3D Solid geometry that represents the BuildingRoom in Level of Detail 4. Deprecated since CityGML 3.0.","type":"core:GeometryProperty","target":"core:AbstractSolid"},{"name":"lod4MultiSurface","namespace":"http://3dcitydb.org/3dcitydb/deprecated/5.0","description":"Relates to a 3D MultiSurface geometry that represents the BuildingRoom in Level of Detail 4. Deprecated since CityGML 3.0.","type":"core:GeometryProperty","target":"core:MultiSurface"}]}'
    WHERE ID = 904;

    UPDATE objectclass
    SET SCHEMA = '{"identifier":"bldg:AbstractBuildingSubdivision","description":"AbstractBuildingSubdivision is the abstract superclass for different kinds of logical building subdivisions.","table":"feature","properties":[{"name":"class","namespace":"http://3dcitydb.org/3dcitydb/building/5.0","description":"Indicates the specific type of the building subdivision.","type":"core:Code"},{"name":"function","namespace":"http://3dcitydb.org/3dcitydb/building/5.0","description":"Specifies the intended purposes of the building subdivision.","type":"core:Code"},{"name":"usage","namespace":"http://3dcitydb.org/3dcitydb/building/5.0","description":"Specifies the actual uses of the building subdivision.","type":"core:Code"},{"name":"elevation","namespace":"http://3dcitydb.org/3dcitydb/building/5.0","description":"Specifies qualified elevations of the building subdivision in relation to a well-defined surface which is commonly taken as origin (e.g. geoid or water level).","type":"con:Elevation"},{"name":"sortKey","namespace":"http://3dcitydb.org/3dcitydb/building/5.0","description":"Defines an order among the objects that belong to the building subdivision. An example is the sorting of storeys.","type":"core:Double"},{"name":"buildingConstructiveElement","namespace":"http://3dcitydb.org/3dcitydb/building/5.0","description":"Relates the constructive elements to the building subdivision.","type":"core:FeatureProperty","target":"bldg:BuildingConstructiveElement","relationType":"contains"},{"name":"buildingFurniture","namespace":"http://3dcitydb.org/3dcitydb/building/5.0","description":"Relates the furniture objects to the building subdivision.","type":"core:FeatureProperty","target":"bldg:BuildingFurniture","relationType":"contains"},{"name":"buildingInstallation","namespace":"http://3dcitydb.org/3dcitydb/building/5.0","description":"Relates the installation objects to the building subdivision.","type":"core:FeatureProperty","target":"bldg:BuildingInstallation","relationType":"contains"},{"name":"buildingRoom","namespace":"http://3dcitydb.org/3dcitydb/building/5.0","description":"Relates the rooms to the building subdivision.","type":"core:FeatureProperty","target":"bldg:BuildingRoom","relationType":"contains"}]}'
    WHERE ID = 907;

    UPDATE objectclass
    SET SCHEMA = '{"identifier":"bldg:BuildingUnit","description":"A BuildingUnit is a logical subdivision of a Building. BuildingUnits are formed according to some homogeneous property like function, ownership, management, or accessibility. They may be separately sold, rented out, inherited, managed, etc.","table":"feature","properties":[{"name":"storey","namespace":"http://3dcitydb.org/3dcitydb/building/5.0","description":"Relates to the storeys on which the BuildingUnit is located.","type":"core:FeatureProperty","target":"bldg:Storey","relationType":"contains"},{"name":"address","namespace":"http://3dcitydb.org/3dcitydb/building/5.0","description":"Relates to the addresses that are assigned to the BuildingUnit.","type":"core:AddressProperty"}]}'
    WHERE ID = 908;

    UPDATE objectclass
    SET SCHEMA = '{"identifier":"bldg:Storey","description":"A Storey is typically a horizontal section of a Building. Storeys are not always defined according to the building structure, but can also be defined according to logical considerations.","table":"feature","properties":[{"name":"buildingUnit","namespace":"http://3dcitydb.org/3dcitydb/building/5.0","description":"Relates to the building units that belong to the Storey.","type":"core:FeatureProperty","target":"bldg:BuildingUnit","relationType":"contains"}]}'
    WHERE ID = 909;

    UPDATE objectclass
    SET SCHEMA = '{"identifier":"brid:AbstractBridge","description":"AbstractBridge is an abstract superclass representing the common attributes and associations of the classes Bridge and BridgePart.","table":"feature","properties":[{"name":"class","namespace":"http://3dcitydb.org/3dcitydb/bridge/5.0","description":"Indicates the specific type of the Bridge or BridgePart.","type":"core:Code"},{"name":"function","namespace":"http://3dcitydb.org/3dcitydb/bridge/5.0","description":"Specifies the intended purposes of the Bridge or BridgePart.","type":"core:Code"},{"name":"usage","namespace":"http://3dcitydb.org/3dcitydb/bridge/5.0","description":"Specifies the actual uses of the Bridge or BridgePart.","type":"core:Code"},{"name":"isMovable","namespace":"http://3dcitydb.org/3dcitydb/bridge/5.0","description":"Indicates whether the Bridge or BridgePart can be moved to allow for watercraft to pass.","type":"core:Boolean"},{"name":"bridgeConstructiveElement","namespace":"http://3dcitydb.org/3dcitydb/bridge/5.0","description":"Relates the constructive elements to the Bridge or BridgePart.","type":"core:FeatureProperty","target":"brid:BridgeConstructiveElement","relationType":"contains"},{"name":"bridgeInstallation","namespace":"http://3dcitydb.org/3dcitydb/bridge/5.0","description":"Relates the installation objects to the Bridge or BridgePart.","type":"core:FeatureProperty","target":"brid:BridgeInstallation","relationType":"contains"},{"name":"bridgeRoom","namespace":"http://3dcitydb.org/3dcitydb/bridge/5.0","description":"Relates the rooms to the Bridge or BridgePart.","type":"core:FeatureProperty","target":"brid:BridgeRoom","relationType":"contains"},{"name":"bridgeFurniture","namespace":"http://3dcitydb.org/3dcitydb/bridge/5.0","description":"Relates the furniture objects to the Bridge or BridgePart.","type":"core:FeatureProperty","target":"brid:BridgeFurniture","relationType":"contains"},{"name":"address","namespace":"http://3dcitydb.org/3dcitydb/bridge/5.0","description":"Relates the addresses to the Bridge or BridgePart.","type":"core:AddressProperty"},{"name":"lod1MultiSurface","namespace":"http://3dcitydb.org/3dcitydb/deprecated/5.0","description":"Relates to a 3D MultiSurface geometry that represents the Bridge or BridgePart in Level of Detail 1. Deprecated since CityGML 3.0.","type":"core:GeometryProperty","target":"core:MultiSurface"},{"name":"lod4MultiCurve","namespace":"http://3dcitydb.org/3dcitydb/deprecated/5.0","description":"Relates to a 3D MultiCurve geometry that represents the Bridge or BridgePart in Level of Detail 4. Deprecated since CityGML 3.0.","type":"core:GeometryProperty","target":"core:MultiLineString"},{"name":"lod4MultiSurface","namespace":"http://3dcitydb.org/3dcitydb/deprecated/5.0","description":"Relates to a 3D MultiSurface geometry that represents the Bridge or BridgePart in Level of Detail 4. Deprecated since CityGML 3.0.","type":"core:GeometryProperty","target":"core:MultiSurface"},{"name":"lod4Solid","namespace":"http://3dcitydb.org/3dcitydb/deprecated/5.0","description":"Relates to a 3D Solid geometry that represents the Bridge or BridgePart in Level of Detail 4. Deprecated since CityGML 3.0.","type":"core:GeometryProperty","target":"core:AbstractSolid"},{"name":"lod4TerrainIntersectionCurve","namespace":"http://3dcitydb.org/3dcitydb/deprecated/5.0","description":"Relates to a 3D MultiCurve geometry that represents the terrain intersection curve of the Bridge or BridgePart in Level of Detail 4. Deprecated since CityGML 3.0.","type":"core:GeometryProperty","target":"core:MultiLineString"}]}'
    WHERE ID = 1000;

    UPDATE objectclass
    SET SCHEMA = '{"identifier":"brid:Bridge","description":"A Bridge represents a structure that affords the passage of pedestrians, animals, vehicles, and service(s) above obstacles or between two points at a height above ground.","table":"feature","properties":[{"name":"bridgePart","namespace":"http://3dcitydb.org/3dcitydb/bridge/5.0","description":"Relates the bridge parts to the Bridge.","type":"core:FeatureProperty","target":"brid:BridgePart","relationType":"contains"}]}'
    WHERE ID = 1001;

    UPDATE objectclass
    SET SCHEMA = '{"identifier":"brid:BridgeRoom","description":"A BridgeRoom is a space within a Bridge or BridgePart intended for human occupancy (e.g. a place of work or recreation) and/or containment (storage) of animals or things. A BridgeRoom is bounded physically and/or virtually (e.g. by ClosureSurfaces or GenericSurfaces).","table":"feature","properties":[{"name":"class","namespace":"http://3dcitydb.org/3dcitydb/bridge/5.0","description":"Indicates the specific type of the BridgeRoom.","type":"core:Code"},{"name":"function","namespace":"http://3dcitydb.org/3dcitydb/bridge/5.0","description":"Specifies the intended purposes of the BridgeRoom.","type":"core:Code"},{"name":"usage","namespace":"http://3dcitydb.org/3dcitydb/bridge/5.0","description":"Specifies the actual uses of the BridgeRoom.","type":"core:Code"},{"name":"bridgeFurniture","namespace":"http://3dcitydb.org/3dcitydb/bridge/5.0","description":"Relates the furniture objects to the BridgeRoom.","type":"core:FeatureProperty","target":"brid:BridgeFurniture","relationType":"contains"},{"name":"bridgeInstallation","namespace":"http://3dcitydb.org/3dcitydb/bridge/5.0","description":"Relates to the installation objects to the BridgeRoom.","type":"core:FeatureProperty","target":"brid:BridgeInstallation","relationType":"contains"},{"name":"lod4Solid","namespace":"http://3dcitydb.org/3dcitydb/deprecated/5.0","description":"Relates to a 3D Solid geometry that represents the BridgeRoom in Level of Detail 4. Deprecated since CityGML 3.0.","type":"core:GeometryProperty","target":"core:AbstractSolid"},{"name":"lod4MultiSurface","namespace":"http://3dcitydb.org/3dcitydb/deprecated/5.0","description":"Relates to a 3D MultiSurface geometry that represents the BridgeRoom in Level of Detail 4. Deprecated since CityGML 3.0.","type":"core:GeometryProperty","target":"core:MultiSurface"}]}'
    WHERE ID = 1004;

    UPDATE objectclass
    SET SCHEMA = '{"identifier":"grp:CityObjectGroup","description":"A CityObjectGroup represents an application-specific aggregation of city objects according to some user-defined criteria. Examples for groups are the buildings in a specific region, the result of a query, or objects put together for visualization purposes. Each member of a group may be qualified by a role name, reflecting the role each city object plays in the context of the group.","table":"feature","properties":[{"name":"class","namespace":"http://3dcitydb.org/3dcitydb/cityobjectgroup/5.0","description":"Indicates the specific type of the CityObjectGroup.","type":"core:Code"},{"name":"function","namespace":"http://3dcitydb.org/3dcitydb/cityobjectgroup/5.0","description":"Specifies the intended purposes of the CityObjectGroup.","type":"core:Code"},{"name":"usage","namespace":"http://3dcitydb.org/3dcitydb/cityobjectgroup/5.0","description":"Specifies the actual usages of the CityObjectGroup.","type":"core:Code"},{"name":"groupMember","namespace":"http://3dcitydb.org/3dcitydb/cityobjectgroup/5.0","description":"Relates to the city objects that are part of the CityObjectGroup and indicates their role.","type":"grp:Role"},{"name":"parent","namespace":"http://3dcitydb.org/3dcitydb/cityobjectgroup/5.0","description":"Relates to a city object to which the CityObjectGroup belongs.","type":"core:FeatureProperty","target":"core:AbstractCityObject","relationType":"relates"},{"name":"geometry","namespace":"http://3dcitydb.org/3dcitydb/deprecated/5.0","description":"Relates to a 3D geometry that represents the CityObjectGroup. Deprecated since CityGML 3.0.","type":"core:GeometryProperty","target":"core:AbstractGeometry"}]}'
    WHERE ID = 1200;

    UPDATE objectclass
    SET SCHEMA = '{"identifier":"vers:Version","description":"Version represents a defined state of a city model consisting of the dedicated versions of all city object instances that belong to the respective city model version. Versions can have names, a description and can be labeled with an arbitrary number of user defined tags.","table":"feature","properties":[{"name":"tag","namespace":"http://3dcitydb.org/3dcitydb/versioning/5.0","description":"Allows for adding keywords to the city model version.","type":"core:String"},{"name":"versionMember","namespace":"http://3dcitydb.org/3dcitydb/versioning/5.0","description":"Relates to all city objects that are part of the city model version.","type":"core:FeatureProperty","target":"core:AbstractFeatureWithLifespan","relationType":"relates"}]}'
    WHERE ID = 1400;

    UPDATE objectclass
    SET SCHEMA = '{"identifier":"vers:VersionTransition","description":"VersionTransition describes the change of the state of a city model from one version to another. Version transitions can have names, a description and can be further qualified by a type and a reason.","table":"feature","properties":[{"name":"reason","namespace":"http://3dcitydb.org/3dcitydb/versioning/5.0","description":"Specifies why the VersionTransition has been carried out.","type":"core:String"},{"name":"clonePredecessor","namespace":"http://3dcitydb.org/3dcitydb/versioning/5.0","description":"Indicates whether the set of city object instances belonging to the successor version of the city model is either explicitly enumerated within the successor version object (attribute clonePredecessor=false), or has to be derived from the modifications of the city model provided as a list of transactions on the city object versions contained in the predecessor version (attribute clonePredecessor=true).","type":"core:Boolean"},{"name":"type","namespace":"http://3dcitydb.org/3dcitydb/versioning/5.0","description":"Indicates the specific type of the VersionTransition.","type":"core:String"},{"name":"from","namespace":"http://3dcitydb.org/3dcitydb/versioning/5.0","description":"Relates to the predecessor version of the VersionTransition.","type":"core:FeatureProperty","target":"vers:Version","relationType":"contains"},{"name":"to","namespace":"http://3dcitydb.org/3dcitydb/versioning/5.0","description":"Relates to the successor version of the VersionTransition.","type":"core:FeatureProperty","target":"vers:Version","relationType":"contains"},{"name":"transaction","namespace":"http://3dcitydb.org/3dcitydb/versioning/5.0","description":"Relates to all transactions that have been applied as part of the VersionTransition.","type":"vers:Transaction"}]}'
    WHERE ID = 1401;

    RAISE NOTICE 'Updating table "datatype" ...';
    UPDATE datatype
    SET SCHEMA = '{"identifier":"core:CityObjectRelation","description":"CityObjectRelation represents a specific relation from the city object in which the relation is included to another city object.","table":"property","properties":[{"name":"relatedTo","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Relates other city objects to the CityObjectRelation.","type":"core:FeatureProperty","target":"core:AbstractCityObject","relationType":"relates","join":{"table":"property","fromColumn":"id","toColumn":"parent_id"}},{"name":"relationType","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Indicates the specific type of the CityObjectRelation.","type":"core:Code","join":{"table":"property","fromColumn":"id","toColumn":"parent_id"}}]}'
    WHERE ID = 13;

    UPDATE datatype
    SET SCHEMA = '{"identifier":"core:ImplicitGeometryProperty","description":"ImplicitGeometryProperty links a feature or property to an implicit geometry.","table":"property","properties":[{"name":"transformationMatrix","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Specifies the mathematical transformation (translation, rotation, and scaling) between the prototypical geometry and the actual spatial position of the object.","value":{"column":"val_array","type":"doubleArray"}},{"name":"referencePoint","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Relates to a 3D Point geometry that represents the base point of the object in the coordinate system of the database.","value":{"column":"val_implicitgeom_refpoint","type":"core:Point"}},{"name":"lod","namespace":"http://3dcitydb.org/3dcitydb/core/5.0","description":"Specifies the Level of Detail of the implicit geometry.","value":{"column":"val_lod","type":"string"}}],"join":{"table":"implicit_geometry","fromColumn":"val_implicitgeom_id","toColumn":"id"}}'
    WHERE ID = 16;

    UPDATE datatype
    SET SCHEMA = '{"identifier":"dyn:SensorConnection","description":"A SensorConnection provides all details that are required to retrieve a specific data stream from an external sensor web service. This data type comprises the service type (e.g. OGC SensorThings API, OGC Sensor Observation Services, MQTT, proprietary platforms), the URL of the sensor service, the identifier for the sensor or thing, and its observed property as well as information about the required authentication method.","table":"property","properties":[{"name":"connectionType","namespace":"http://3dcitydb.org/3dcitydb/dynamizer/5.0","description":"Indicates the type of Sensor API to which the SensorConnection refers.","type":"core:Code","join":{"table":"property","fromColumn":"id","toColumn":"parent_id"}},{"name":"observationProperty","namespace":"http://3dcitydb.org/3dcitydb/dynamizer/5.0","description":"Specifies the phenomenon for which the SensorConnection provides observations.","type":"core:String","join":{"table":"property","fromColumn":"id","toColumn":"parent_id"}},{"name":"uom","namespace":"http://3dcitydb.org/3dcitydb/dynamizer/5.0","description":"Specifies the unit of measurement of the observations.","type":"core:String","join":{"table":"property","fromColumn":"id","toColumn":"parent_id"}},{"name":"sensorID","namespace":"http://3dcitydb.org/3dcitydb/dynamizer/5.0","description":"Specifies the unique identifier of the sensor from which the SensorConnection retrieves observations.","type":"core:String","join":{"table":"property","fromColumn":"id","toColumn":"parent_id"}},{"name":"sensorName","namespace":"http://3dcitydb.org/3dcitydb/dynamizer/5.0","description":"Specifies the name of the sensor from which the SensorConnection retrieves observations.","type":"core:String","join":{"table":"property","fromColumn":"id","toColumn":"parent_id"}},{"name":"observationID","namespace":"http://3dcitydb.org/3dcitydb/dynamizer/5.0","description":"Specifies the unique identifier of the observation that is retrieved by the SensorConnection.","type":"core:String","join":{"table":"property","fromColumn":"id","toColumn":"parent_id"}},{"name":"datastreamID","namespace":"http://3dcitydb.org/3dcitydb/dynamizer/5.0","description":"Specifies the datastream that is retrieved by the SensorConnection.","type":"core:String","join":{"table":"property","fromColumn":"id","toColumn":"parent_id"}},{"name":"baseURL","namespace":"http://3dcitydb.org/3dcitydb/dynamizer/5.0","description":"Specifies the base URL of the Sensor API request.","type":"core:URI","join":{"table":"property","fromColumn":"id","toColumn":"parent_id"}},{"name":"authType","namespace":"http://3dcitydb.org/3dcitydb/dynamizer/5.0","description":"Specifies the type of authentication required to be able to access the Sensor API.","type":"core:Code","join":{"table":"property","fromColumn":"id","toColumn":"parent_id"}},{"name":"mqttServer","namespace":"http://3dcitydb.org/3dcitydb/dynamizer/5.0","description":"Specifies the name of the MQTT Server. This attribute is relevant when the MQTT Protocol is used to connect to a Sensor API.","type":"core:String","join":{"table":"property","fromColumn":"id","toColumn":"parent_id"}},{"name":"mqttTopic","namespace":"http://3dcitydb.org/3dcitydb/dynamizer/5.0","description":"Names the specific datastream that is retrieved by the SensorConnection. This attribute is relevant when the MQTT Protocol is used to connect to a Sensor API.","type":"core:String","join":{"table":"property","fromColumn":"id","toColumn":"parent_id"}},{"name":"linkToObservation","namespace":"http://3dcitydb.org/3dcitydb/dynamizer/5.0","description":"Specifies the complete URL to the observation request.","type":"core:String","join":{"table":"property","fromColumn":"id","toColumn":"parent_id"}},{"name":"linkToSensorDescription","namespace":"http://3dcitydb.org/3dcitydb/dynamizer/5.0","description":"Specifies the complete URL to the sensor description request.","type":"core:String","join":{"table":"property","fromColumn":"id","toColumn":"parent_id"}},{"name":"sensorLocation","namespace":"http://3dcitydb.org/3dcitydb/dynamizer/5.0","description":"Relates the sensor to the city object where it is located.","type":"core:FeatureProperty","target":"core:AbstractCityObject","relationType":"relates","join":{"table":"property","fromColumn":"id","toColumn":"parent_id"}}]}'
    WHERE ID = 102;

    UPDATE datatype
    SET SCHEMA = '{"identifier":"dyn:TimeseriesComponent","description":"TimeseriesComponent represents an element of a CompositeTimeseries.","table":"property","properties":[{"name":"repetitions","namespace":"http://3dcitydb.org/3dcitydb/dynamizer/5.0","description":"Specifies how often the timeseries that is referenced by the TimeseriesComponent should be iterated.","type":"core:Integer","join":{"table":"property","fromColumn":"id","toColumn":"parent_id"}},{"name":"additionalGap","namespace":"http://3dcitydb.org/3dcitydb/dynamizer/5.0","description":"Specifies how much extra time is added after all repetitions as an additional gap.","type":"core:Duration","join":{"table":"property","fromColumn":"id","toColumn":"parent_id"}},{"name":"timeseries","namespace":"http://3dcitydb.org/3dcitydb/dynamizer/5.0","description":"Relates a timeseries to the TimeseriesComponent.","type":"core:FeatureProperty","target":"dyn:AbstractTimeseries","relationType":"contains","join":{"table":"property","fromColumn":"id","toColumn":"parent_id"}}]}'
    WHERE ID = 109;

    UPDATE datatype
    SET SCHEMA = '{"identifier":"grp:Role","description":"Role qualifies the function of a city object within the CityObjectGroup.","table":"property","properties":[{"name":"groupMember","namespace":"http://3dcitydb.org/3dcitydb/cityobjectgroup/5.0","description":"Relates to the city objects that are part of the CityObjectGroup.","type":"core:FeatureProperty","target":"core:AbstractCityObject","relationType":"relates","join":{"table":"property","fromColumn":"id","toColumn":"parent_id"}},{"name":"role","namespace":"http://3dcitydb.org/3dcitydb/cityobjectgroup/5.0","description":"Describes the role the city object plays within the CityObjectGroup.","type":"core:String","join":{"table":"property","fromColumn":"id","toColumn":"parent_id"}}]}'
    WHERE ID = 1200;

    UPDATE datatype
    SET SCHEMA = '{"identifier":"vers:Transaction","description":"Transaction represents a modification of the city model by the creation, termination, or replacement of a specific city object. While the creation of a city object also marks its first object version, the termination marks the end of existence of a real world object and, hence, also terminates the final version of a city object. The replacement of a city object means that a specific version of it is replaced by a new version.","table":"property","properties":[{"name":"type","namespace":"http://3dcitydb.org/3dcitydb/versioning/5.0","description":"Indicates the specific type of the Transaction.","type":"core:String","join":{"table":"property","fromColumn":"id","toColumn":"parent_id"}},{"name":"oldFeature","namespace":"http://3dcitydb.org/3dcitydb/versioning/5.0","description":"Relates to the version of the city object prior to the Transaction.","type":"core:FeatureProperty","target":"core:AbstractFeatureWithLifespan","relationType":"relates","join":{"table":"property","fromColumn":"id","toColumn":"parent_id"}},{"name":"newFeature","namespace":"http://3dcitydb.org/3dcitydb/versioning/5.0","description":"Relates to the version of the city object subsequent to the Transaction.","type":"core:FeatureProperty","target":"core:AbstractFeatureWithLifespan","relationType":"relates","join":{"table":"property","fromColumn":"id","toColumn":"parent_id"}}]}'
    WHERE ID = 1400;

    RAISE NOTICE E'Re-creating the foreign key "property_val_feature_fk" with ON DELETE SET NULL ...\n';
    ALTER TABLE property DROP CONSTRAINT property_val_feature_fk;
    ALTER TABLE property ADD CONSTRAINT property_val_feature_fk FOREIGN KEY ( val_feature_id ) REFERENCES feature( id ) ON DELETE SET NULL;
  END LOOP;
END
$$;